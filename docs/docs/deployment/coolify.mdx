---
title: Deploying on Coolify
sidebar_label: Coolify
---

This guide documents the small differences required to run Archon on Coolify compared to a plain docker-compose environment.

## Summary of Coolify-specific adjustments

- Internal API allowlist: Coolify assigns service IPs in the 10.0.0.0/8 range. Archon's internal API now accepts RFC1918 private IPs out of the box.
- MCP container name: Coolify often rewrites `container_name`. The server now supports `MCP_CONTAINER_NAME` to discover the MCP container for lifecycle endpoints.
- Frontend API URL: Use the public API domain for `VITE_API_URL` so browsers don't attempt to call `localhost`.
- Recommended: serve a production build of the frontend (`vite preview`) in production.

## Backend (archon-server)

No compose change required for networking. If Coolify rewrites the MCP container name, set:

- Env: `MCP_CONTAINER_NAME=Archon-MCP`

The server will then manage the MCP container using this name.

## MCP (archon-mcp)

If you control `container_name`, set it to `Archon-MCP` to match defaults. Otherwise, rely on the env override above.

## Agents (archon-agents)

Agents fetch credentials via the server's internal endpoint. On Coolify's 10.x network, this is now permitted automatically by the server.

No additional configuration required.

## Frontend (archon-ui)

- Set `VITE_API_URL` to your public API URL, for example:

```
VITE_API_URL=https://archon-api.tanksterai.com
```

- Recommended in production: build and serve the app

```
npm ci && npm run build
npm run preview -- --host 0.0.0.0 --port 5173
```

Ensure your reverse proxy (Traefik/Caddy, managed by Coolify) routes to container port `5173` and that the frontend container is attached to the same ingress network Coolify uses.

## Troubleshooting

- 403 from `/internal/credentials/agents`:
  - Confirm the Archon server includes the internal IP update (RFC1918 private IPs allowed).
- MCP management endpoints say container not found:
  - Set `MCP_CONTAINER_NAME` on the server or align the MCP `container_name` to `Archon-MCP`.
- Frontend 502:
  - Confirm `VITE_API_URL` points to the public API domain and Traefik routes to the correct container/port/network.

## Notes

These adjustments are backward compatible with non-Coolify deployments. No changes are required for standard docker-compose users.

